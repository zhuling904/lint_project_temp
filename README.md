# lint+ts æ¨¡æ¿é¡¹ç›®

æœ¬é¡¹ç›®ä½¿ç”¨çš„æ˜¯`node18.18.0`ï¼Œæ–‡ç« å‚è€ƒï¼Œå¤§éƒ¨åˆ†æ–‡æ¡ˆå¤åˆ¶ä»[æˆ‘æ˜¯è¿™æ ·æ­å»ºTypescript+Reacté¡¹ç›®ç¯å¢ƒçš„](https://github.com/vortesnail/blog/issues/14)ï¼Œä»…ä½œä¸ºæœ¬äººå­¦ä¹ è®°å½•ï¼Œæ›´æ”¹å…¶ä¸­å­˜åœ¨é—®é¢˜çš„åœ°æ–¹ï¼Œä½¿ç”¨çš„éƒ½æ˜¯è¾ƒæ–°ç‰ˆæœ¬çš„åŒ…ï¼Œé…ç½®ä¼šæœ‰ä¸€äº›ä¸åŒ

**é—®é¢˜è®°å½•**

stylelint é…ç½®é¡ºåºä¿®æ­£å®¹æ˜“æŠ½é£ï¼Œé‡å¯vscode
https://juejin.cn/post/6940127032932040735#heading-1

lint-stageé…ç½®åœ¨commitçš„æ—¶å€™è¿›è¡Œç±»å‹æ£€æµ‹
https://juejin.cn/post/7257441221761040444?searchId=202403162308273C8699A823B5DCC6A0A0#heading-9

huskyç”Ÿæˆ.huskyæ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­æ‰§è¡Œè„šæœ¬ï¼Œæ¯”å¦‚pre-commitï¼Œæ–‡ä»¶ä¸­å†™å…¥å¯¹åº”éœ€è¦æ‰§è¡Œçš„è„šæœ¬

# ä¸€ã€é¡¹ç›®åˆå§‹åŒ–åŠé…ç½®

## 1.package.json

æ¯ä¸€ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ª `package.json` æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®°å½•é¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„é¡¹ç›®åç§°ã€åŒ…çš„å…¥å£æ–‡ä»¶ã€é¡¹ç›®ç‰ˆæœ¬ç­‰ï¼Œä¹Ÿä¼šè®°å½•æ‰€éœ€çš„å„ç§ä¾èµ–ï¼Œè¿˜æœ‰å¾ˆé‡è¦çš„ `script` å­—æ®µï¼Œå®ƒæŒ‡å®šäº†è¿è¡Œè„šæœ¬å‘½ä»¤çš„ `npm` å‘½ä»¤è¡Œç¼©å†™ã€‚

é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°±èƒ½å¿«é€Ÿç”Ÿæˆè¯¥æ–‡ä»¶ï¼š

```
npm init -y | yarn init -y
```

é€šè¿‡ä¿®æ”¹ç”Ÿæˆçš„é»˜è®¤é…ç½®ï¼Œç°åœ¨çš„å†…å®¹å¦‚ä¸‹ï¼š

```json
{
  "name": "ts-lint-quick-starter",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {},
  "repository": {
    "type": "git",
    "url": ""
  },
  "keywords": [],
  "author": {
    "name": "zhu ling",
    "url": "",
    "email": ""
  },
  "license": "MIT",
  "bugs": {
    "url": ""
  },
  "homepage": ""
}
```

- `description` ï¼šå¢åŠ äº†å¯¹è¯¥é¡¹ç›®çš„æè¿°ï¼Œgithub è¿›è¡Œ repo æœç´¢æ—¶ï¼Œå…³é”®å­—åŒ¹é…ä¼šä½¿ä½ çš„é¡¹ç›®æ›´å®¹æ˜“è¢«æœç´¢åˆ°ã€‚
- `scripts` ï¼šæŠŠé»˜è®¤ç”Ÿæˆçš„åˆ äº†ï¼Œæ²¡å•¥ç”¨ã€‚
- `keywords` ï¼šå¢åŠ äº†é¡¹ç›®å…³é”®å­—ï¼Œå…¶ä»–å¼€å‘è€…åœ¨ npm ä¸Šæœç´¢çš„æ—¶å€™ï¼Œé€‚åˆçš„å…³é”®å­—èƒ½ä½ çš„åŒ…æ›´å®¹æ˜“è¢«æœç´¢åˆ°ã€‚
- `author` ï¼šæ·»åŠ äº†æ›´å…·ä½“çš„ä½œè€…ä¿¡æ¯ã€‚
- `license` ï¼šä¿®æ”¹ä¸º[MIT](https://opensource.org/licenses/MIT)åè®®ã€‚

## 2.LICENSE

æˆ‘ä»¬åœ¨å»ºä»“åº“çš„æ—¶å€™ä¼šæœ‰é€‰é¡¹è®©æˆ‘ä»¬é€‰æ‹©å¼€æºåè®®ï¼Œæˆ‘å½“æ—¶å°±é€‰äº†MITåè®®ï¼Œå¦‚æœæ²¡é€‰çš„ä¹Ÿä¸è¦ç´§ï¼Œå»ç½‘ç«™ [choosealicense](http://choosealicense.online/) é€‰æ‹©åˆé€‚çš„ licenseï¼ˆä¸€èˆ¬ä¼šé€‰å®½æ¾çš„ MIT åè®®ï¼‰ï¼Œå¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `LICENSE` æ–‡ä»¶å†…å³å¯ï¼Œç„¶åä¿®æ”¹ä½œè€…åå’Œå¹´ä»½ï¼Œå¦‚ä¸‹ï¼š

```
MIT License

Copyright (c) 2024 zhu ling

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights...
```

## 3.gitignore

è¯¥æ–‡ä»¶å†³å®šäº†é¡¹ç›®è¿›è¡Œ git æäº¤æ—¶æ‰€éœ€è¦å¿½ç•¥æ‰çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œç¼–è¾‘å™¨å¦‚ vscode ä¹Ÿä¼šç›‘å¬ `.gitignore` ä¹‹å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œå¿½ç•¥çš„æ–‡ä»¶æœ‰æ‰€å˜åŠ¨æ—¶ï¼Œåœ¨è¿›è¡Œ git æäº¤æ—¶å°±ä¼šè¢«è¯†åˆ«ä¸ºéœ€è¦æäº¤çš„æ–‡ä»¶ã€‚

`node_modules` æ˜¯æˆ‘ä»¬å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªè‚¯å®šè¦æ·»åŠ è‡³ `.gitignore` ä¸­ï¼Œä¸”ä¸è¯´è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢æˆåƒä¸Šä¸‡çš„æ–‡ä»¶ä¼šç»™ç¼–è¾‘å™¨å¸¦æ¥æ€§èƒ½å‹åŠ›ï¼Œä¹Ÿä¼šç»™æäº¤è‡³è¿œç«¯çš„æœåŠ¡å™¨é€ æˆä¸å°æŸå¤±ï¼Œå¦å¤–å°±æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ä¸œè¥¿ï¼Œå®Œå…¨å¯ä»¥é€šè¿‡ç®€å•çš„ `npm install` å°±èƒ½å¾—åˆ°ï½

æ‰€ä»¥ä¸éœ€è¦ä¸Šä¼ è‡³ git ä»“åº“çš„éƒ½è¦æ·»åŠ è¿›æ¥ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„ `build` ã€ `dist` ç­‰ï¼Œè¿˜æœ‰æ“ä½œç³»ç»Ÿé»˜è®¤ç”Ÿæˆçš„ï¼Œæ¯”å¦‚ MacOs ä¼šç”Ÿæˆå­˜å‚¨é¡¹ç›®æ–‡ä»¶å¤¹æ˜¾ç¤ºå±æ€§çš„ `DS_Store` æ–‡ä»¶ã€‚

å¯ä»¥ç”¨æ’ä»¶ç”Ÿæˆ

![image-20240317111341042](./assets/image-20240317111341042.png)

## 4.npmrc | yarnrc

å¤§å®¶ä¸€å¼€å§‹ä½¿ç”¨ npm å®‰è£…ä¾èµ–åŒ…æ—¶ï¼Œè‚¯å®šæ„Ÿå—è¿‡é‚£æŒ¤ç‰™è†èˆ¬çš„ä¸‹è½½é€Ÿåº¦ï¼Œä¸Šç½‘ä¸€æŸ¥åªéœ€è¦å°† npm æºè®¾ç½®ä¸ºæ·˜å®é•œåƒæºå°±è¡Œï¼Œåœ¨æ§åˆ¶å°æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤ï¼š

ç°åœ¨æ·˜å®è¯ä¹¦åˆ°æœŸäº†ï¼Œæ¢äº†ï¼Œ

```
npm config set registry https://registry.npmmirror.com
```

ä»æ­¤è¿‡ä¸Šäº†**é€Ÿåº¦ä¸ƒåè¿ˆï¼Œå¿ƒæƒ…æ˜¯è‡ªç”±è‡ªåœ¨**çš„ç”Ÿæ´»ã€‚

ä½†æ˜¯å¤§å®¶æƒ³æƒ³ï¼Œä¸‡ä¸€æŸä¸ªåŒå­¦å…‹éš†äº†ä½ çš„é¡¹ç›®ä¹‹åï¼Œå‡†å¤‡åœ¨ä»–æœ¬åœ°å¼€å‘çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è®¾ç½®æ·˜å®é•œåƒæºï¼Œåˆè¦äººå®¶å»æ‰‹åŠ¨è®¾ç½®ä¸€éï¼Œæˆ‘ä»¬ä½œä¸ºé¡¹ç›®çš„å‘èµ·è€…ï¼Œå°±å…ˆç»™åˆ«äººçœä¸‹è¿™ä»½æ—¶é—´å§ï¼Œåªéœ€è¦åœ¨æ ¹ç›®å½•æ·»åŠ ä¸€ä¸ª `.npmrc` å¹¶åšç®€å•çš„é…ç½®å³å¯ï¼š

```
# åˆ›å»º .npmrc æ–‡ä»¶
touch .npmrc
# åœ¨è¯¥æ–‡ä»¶å†…è¾“å…¥é…ç½®
registry=https://registry.npmmirror.com/
```

```
# åˆ›å»º .yarnrc æ–‡ä»¶
touch .yarnrc
# åœ¨è¯¥æ–‡ä»¶å†…è¾“å…¥é…ç½®
registry "https://registry.npmmirror.com"
```

## 5.README.md

ä½ åªè¦ä¸Š github æ‰¾ä»»ä½•ä¸€ä¸ªé¡¹ç›®ï¼Œç‚¹è¿›å»ä¹‹åå¾€ä¸‹æ‹‰ä¸€ç‚¹ï¼Œçœ‹åˆ°çš„å¯¹é¡¹ç›®çš„ç›´æ¥è¯´æ˜å°±æ˜¯ `README.md` æ‰€å‘ˆç°çš„ï¼Œè¿™ä¸ªæ–‡ä»¶æ— æ¯”é‡è¦ï¼Œä¸€ä¸ªå¥½çš„å¼€æºé¡¹ç›®å¿…é¡»ï¼å¿…é¡»ï¼å¿…é¡»ï¼æœ‰ä¸€ä¸ªç®€æ˜ä¸”ç¾è§‚çš„ `README.md` ï¼Œä¸è¿‡æ–‡ç« å†™åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„è¿™ä¸ªè„šæ‰‹æ¶å¹¶æ²¡æœ‰ä»»ä½•å®è´¨æ€§çš„å†…å®¹ï¼Œä¹‹åå®Œå…¨é…ç½®å®Œä¹‹åï¼Œä¼šå†å¥½å¥½ä¹¦å†™ä¸€ä¸‹ã€‚

åç»­æˆ‘è¿˜ä¼šå†å¯¹è¿™éƒ¨åˆ†å†…å®¹åšè¡¥å……ï¼Œç°åœ¨å¤§å®¶å…ˆ `touch README.md` åˆ›å»ºæ–‡ä»¶ï¼Œç„¶åéšæ„å†™ç‚¹ä¸œè¥¿å…ˆçœ‹ç€ï½

# äºŒã€è§„èŒƒä»£ç ä¸æäº¤

## 1.è§£å†³ä»£ç é£æ ¼é—®é¢˜

### 1.1.EditorConfigç¼–è¾‘å™¨é£æ ¼

`.editorconfig` æ˜¯è·¨ç¼–è¾‘å™¨ç»´æŠ¤ä¸€è‡´ç¼–ç é£æ ¼çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰çš„ç¼–è¾‘å™¨ä¼šé»˜è®¤é›†æˆè¯»å–è¯¥é…ç½®æ–‡ä»¶çš„åŠŸèƒ½ï¼Œä½†æ˜¯ vscode éœ€è¦å®‰è£…ç›¸åº”çš„æ‰©å±• [EditorConfig For vs Code](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig) ã€‚

![image-20240317111647625](./assets/image-20240317111647625.png)

å®‰è£…å®Œæ­¤æ‰©å±•åï¼Œåœ¨ vscode ä¸­ä½¿ç”¨å¿«æ·é”® `ctrl+shift+p` æ‰“å¼€å‘½ä»¤å°ï¼Œè¾“å…¥ `Generate .editorcofig` å³å¯å¿«é€Ÿç”Ÿæˆ `.editorconfig` æ–‡ä»¶ï¼Œå½“ç„¶ï¼Œæœ‰æ—¶å€™ vscode æŠ½é£æ‰¾ä¸åˆ°å‘½ä»¤ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œæ¯”å¦‚æˆ‘å°±ç»å¸¸é‡åˆ°è¾“å…¥è¯¥å‘½ä»¤æ²¡ç”¨ï¼Œéœ€è¦é‡å¯æ‰ä¼šé‡æ–°å‡ºç°ï¼Œé‚£ä¹ˆå°±æ‰‹åŠ¨åˆ›å»ºè¯¥æ–‡ä»¶ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚

è¯¥æ–‡ä»¶çš„é…ç½®ç‰¹åˆ«ç®€å•ï¼Œå°±å°‘è®¸çš„å‡ ä¸ªé…ç½®ï¼Œæ¯”å¦‚æˆ‘çš„é…ç½®å¦‚ä¸‹

```
root = true

[*]
indent_style = space
indent_size = 2
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true
end_of_line = lf

[*.md]
trim_trailing_whitespace = false
```

æ‰©å±•è£…å®Œï¼Œé…ç½®é…å®Œï¼Œç¼–è¾‘å™¨å°±ä¼šå»é¦–å…ˆè¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¹ç¼©è¿›é£æ ¼ã€ç¼©è¿›å¤§å°åœ¨æ¢è¡Œæ—¶ç›´æ¥æŒ‰ç…§é…ç½®çš„æ¥ï¼Œåœ¨ä½  `ctrl+s` ä¿å­˜æ—¶ï¼Œå°±ä¼šæŒ‰ç…§é‡Œé¢çš„è§„åˆ™è¿›è¡Œä»£ç æ ¼å¼åŒ–ã€‚ä»¥ä¸‹æ˜¯ä¸Šè¿°é…ç½®çš„ç®€å•ä»‹ç»ï¼š

- `indent_style` ï¼šç¼©è¿›é£æ ¼ï¼Œå¯é€‰é…ç½®æœ‰ `tab` å’Œ `space` ã€‚
- `indent_size` ï¼šç¼©è¿›å¤§å°ï¼Œå¯è®¾å®šä¸º `1-8` çš„æ•°å­—ï¼Œæ¯”å¦‚è®¾å®šä¸º `2` ï¼Œé‚£å°±æ˜¯ç¼©è¿› `2` ä¸ªç©ºæ ¼ã€‚
- `charset` ï¼šç¼–ç æ ¼å¼ï¼Œé€šå¸¸éƒ½æ˜¯é€‰ `utf-8` ã€‚
- `trim_trailing_whitespace` ï¼šå»é™¤å¤šä½™çš„ç©ºæ ¼ï¼Œæ¯”å¦‚ä½ ä¸å°å¿ƒåœ¨å°¾å·´å¤šæ‰“äº†ä¸ªç©ºæ ¼ï¼Œå®ƒä¼šç»™ä½ è‡ªåŠ¨å»æ‰ã€‚
- `insert_final_newline` ï¼šåœ¨å°¾éƒ¨æ’å…¥ä¸€è¡Œï¼Œä¸ªäººå¾ˆå–œæ¬¢è¿™ä¸ªé£æ ¼ï¼Œå½“æœ€åä¸€è¡Œä»£ç å¾ˆé•¿çš„æ—¶å€™ï¼Œä½ åˆæƒ³å¯¹è¯¥è¡Œä»£ç æ¯”è¾ƒé åçš„ä½ç½®ç¼–è¾‘æ—¶ï¼Œä¸è¦å¤ªå¥½ç”¨å“¦ï¼Œå»ºè®®å¤§å®¶ä¹Ÿå¼€ä¸Šã€‚
- `end_of_line` ï¼šæ¢è¡Œç¬¦ï¼Œå¯é€‰é…ç½®æœ‰ `lf` ï¼Œ`cr` ï¼Œ`crlf` ï¼Œä¼šæœ‰ä¸‰ç§çš„åŸå› æ˜¯å› ä¸ºå„ä¸ªæ“ä½œç³»ç»Ÿä¹‹é—´çš„æ¢è¡Œç¬¦ä¸ä¸€è‡´ï¼Œè¿™é‡Œæœ‰å†å²åŸå› ï¼Œæœ‰å…´è¶£çš„åŒå­¦è‡ªè¡Œäº†è§£å§ï¼Œè®¸å¤šæœ‰åçš„å¼€æºåº“éƒ½æ˜¯ä½¿ç”¨ `lf` ï¼Œæˆ‘ä»¬å§‘ä¸”ä¹Ÿè·Ÿè·Ÿé£å§ã€‚

å› ä¸º `markdown` è¯­æ³•ä¸­ï¼Œæˆ‘æƒ³è¦æ¢è¡Œéœ€è¦åœ¨ä¸Šä¸€è¡Œå¤šæ‰“ 2 ä¸ªä»¥ä¸Šçš„ç©ºæ ¼ï¼Œä¸ºäº†ä¸å½±å“è¯¥è¯­æ³•ï¼Œæ•… `.md` æ–‡ä»¶ä¸­æŠŠ**å»é™¤å¤šä½™ç©ºæ ¼**å…³æ‰äº†ã€‚

### 1.2.Prettier

#### 1.2.1 å®‰è£…é…ç½®

å¦‚æœè¯´ `EditorConfig` å¸®ä½ ç»Ÿä¸€ç¼–è¾‘å™¨é£æ ¼ï¼Œé‚£ `Prettier` å°±æ˜¯å¸®ä½ ç»Ÿä¸€é¡¹ç›®é£æ ¼çš„ã€‚ `Prettier` æ‹¥æœ‰æ›´å¤šé…ç½®é¡¹ï¼ˆå®é™…ä¸Šä¹Ÿä¸å¤šï¼Œæ•°äº†ä¸‹äºŒåä¸ªï¼‰ï¼Œä¸”èƒ½åœ¨å‘å¸ƒæµç¨‹ä¸­æ‰§è¡Œå‘½ä»¤è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„ä½¿é¡¹ç›®ä»£ç é£æ ¼è¶‹äºç»Ÿä¸€ã€‚

åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä¾èµ–åŒ…ï¼š

```
yarn add prettier@3.2.5 -D
```

å®‰è£…æˆåŠŸä¹‹ååœ¨æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶ `.prettierrc` ï¼Œè¾“å…¥ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "trailingComma": "all",
  "tabWidth": 2,
  "semi": false,
  "singleQuote": true,
  "endOfLine": "lf",
  "printWidth": 120,
  "bracketSpacing": true,
  "arrowParens": "always"
}
```

å…¶å® `Prettier` çš„é…ç½®é¡¹å¾ˆå°‘ï¼Œå¤§å®¶å¯ä»¥å» [Prettier Playground](https://prettier.io/playground/) å¤§æ¦‚æŠŠç©ä¸€ä¼šå„¿ï¼Œä¸‹é¢æˆ‘ç®€å•ä»‹ç»ä¸‹ä¸Šè¿°çš„é…ç½®ï¼š

- `trailingComma` ï¼šå¯¹è±¡çš„æœ€åä¸€ä¸ªå±æ€§æœ«å°¾ä¹Ÿä¼šæ·»åŠ  `,` ï¼Œæ¯”å¦‚ `{ a: 1, b: 2 }` ä¼šæ ¼å¼ä¸º `{ a: 1, b: 2, }` ã€‚
- `tabWidth` ï¼šç¼©è¿›å¤§å°ã€‚
- `semi` ï¼šåˆ†å·æ˜¯å¦æ·»åŠ ï¼Œæˆ‘ä»¥å‰ä»C++è½¬å‰ç«¯çš„ï¼Œæœ‰ä¸€æ®µæ—¶é—´éå¸¸ä¸èƒ½å¿å—ä¸åŠ åˆ†å·çš„è¡Œä¸ºï¼Œç°åœ¨é¦™çš„ä¸€åŒ¹ã€‚
- `singleQuote` ï¼šæ˜¯å¦å•å¼•å·ï¼Œç»å£é€‰æ‹©å•å¼•å·å•Šï¼Œä¸ä¼šçœŸæœ‰äººè¿˜ç”¨åŒå¼•å·å§ï¼Ÿä¸ä¼šå§ï¼ğŸ˜
- `jsxSingleQuote` ï¼šjsx è¯­æ³•ä¸‹æ˜¯å¦å•å¼•å·ï¼ŒåŒä¸Šã€‚
- `endOfLine` ï¼šä¸ `.editorconfig` ä¿æŒä¸€è‡´è®¾ç½®ã€‚
- `printWidth` ï¼šå•è¡Œä»£ç æœ€é•¿å­—ç¬¦é•¿åº¦ï¼Œè¶…è¿‡ä¹‹åä¼šè‡ªåŠ¨æ ¼å¼åŒ–æ¢è¡Œã€‚
- `bracketSpacing` ï¼šåœ¨å¯¹è±¡ä¸­çš„æ‹¬å·ä¹‹é—´æ‰“å°ç©ºæ ¼ï¼Œ `{a: 5}` æ ¼å¼åŒ–ä¸º `{ a: 5 }` ã€‚
- `arrowParens` ï¼šç®­å¤´å‡½æ•°çš„å‚æ•°æ— è®ºæœ‰å‡ ä¸ªï¼Œéƒ½è¦æ‹¬å·åŒ…è£¹ã€‚æ¯”å¦‚ `(a) => {}` ï¼Œå¦‚æœè®¾ä¸º `avoid` ï¼Œä¼šè‡ªåŠ¨æ ¼å¼åŒ–ä¸º `a => {}` ã€‚

#### 1.2.2 é…ç½®ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–

ä½ æ‰€éœ€è¦åšçš„æ˜¯å…ˆå®‰è£…æ‰©å±• [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) ï¼š

![image-20240317112429262](./assets/image-20240317112429262.png)

å½“å®‰è£…ç»“æŸåï¼Œ åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ `.vscode` ï¼Œåœ¨æ­¤æ–‡ä»¶ä¸‹å†å»ºä¸€ä¸ª `settings.json` æ–‡ä»¶ï¼š

![image-20240317112448177](./assets/image-20240317112448177.png)

è¯¥æ–‡ä»¶çš„é…ç½®ä¼˜å…ˆäº vscode å…¨å±€çš„ `settings.json` ï¼Œè¿™æ ·åˆ«äººä¸‹è½½äº†ä½ çš„é¡¹ç›®è¿›è¡Œå¼€å‘ï¼Œä¹Ÿä¸ä¼šå› ä¸ºå…¨å±€ `setting.json` çš„é…ç½®ä¸åŒè€Œå¯¼è‡´ `Prettier` æˆ–ä¹‹åä¼šè¯´åˆ°çš„ `ESLint` ã€ `StyleLint` å¤±æ•ˆï¼Œæ¥ä¸‹æ¥åœ¨è¯¥æ–‡ä»¶å†…è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```json
{
  // æŒ‡å®šå“ªäº›æ–‡ä»¶ä¸å‚ä¸æœç´¢
  "search.exclude": {
    "**/node_modules": true,
    "dist": true,
    "yarn.lock": true
  },
  "editor.formatOnSave": true,
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[javascriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[json]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[html]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[markdown]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[css]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[less]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[scss]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

`"editor.formatOnSave"` çš„ä½œç”¨æ˜¯åœ¨æˆ‘ä»¬ä¿å­˜æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ä»£ç æ ¼å¼åŒ–ï¼Œè€Œæˆ‘ä»¬è¯¥ä½¿ç”¨ä»€ä¹ˆæ ¼å¼åŒ–å™¨ï¼Ÿæ¥ä¸‹æ¥çš„ä»£ç ä¾¿æ˜¯è®¾ç½®é»˜è®¤çš„æ ¼å¼åŒ–å™¨ï¼Œçœ‹åå­—å¤§å®¶ä¹Ÿèƒ½çœ‹å¾—å‡ºæ¥äº†å§ï¼

åœ¨é‡åˆ° `.js` ã€ `.jsx` ã€`.ts` ã€`.tsx` ã€`.json` ã€`.html` ã€`.md` ã€ `.css` ã€ `.less` ã€ `.scss` ä¸ºåç¼€çš„æ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šå»ä½¿ç”¨ `Prettier` å»æ ¼å¼åŒ–ä»£ç ï¼Œè€Œæ ¼å¼åŒ–çš„è§„åˆ™å°±æ˜¯æˆ‘ä»¬é…ç½®çš„ `.prettierrc` å†³å®šçš„ï¼

![æ¼”ç¤º](./assets/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343330373235343335342d32363931643839302d366334622d343362392d623033632d3631653061333730666337382e67696623616c69676e3d6c65667426646973706c61 (1).gif)

`.editorconfig` é…ç½®æ–‡ä»¶ä¸­æŸäº›é…ç½®é¡¹æ˜¯ä¼šå’Œ `Prettier` é‡åˆçš„ï¼Œä¾‹å¦‚ æŒ‡å®šç¼©è¿›å¤§å° ä¸¤è€…éƒ½å¯ä»¥é…ç½®ã€‚

#### 1.2.3 ä¸EditorConfigçš„åŒºåˆ«

æˆ‘ä»¬å¯ä»¥çœ‹åˆ° `EditorConfig` çš„é…ç½®é¡¹éƒ½æ˜¯ä¸€äº›**ä¸æ¶‰åŠå…·ä½“è¯­æ³•**çš„ï¼Œæ¯”å¦‚ ç¼©è¿›å¤§å°ã€æ–‡ç§»é™¤å¤šä½™ç©ºæ ¼ç­‰ã€‚

è€Œ `Prettier` æ˜¯ä¸€ä¸ªæ ¼å¼åŒ–å·¥å…·ï¼Œè¦æ ¹æ®**å…·ä½“è¯­æ³•æ ¼å¼åŒ–**ï¼Œå¯¹äºä¸åŒçš„è¯­æ³•ç”¨å•å¼•å·è¿˜æ˜¯åŒå¼•å·ï¼ŒåŠ ä¸åŠ åˆ†å·ï¼Œå“ªé‡Œæ¢è¡Œç­‰ï¼Œå½“ç„¶ï¼Œè‚¯å®šä¹Ÿæœ‰ç¼©è¿›å¤§å°ã€‚

å³ä½¿ç¼©è¿›å¤§å°è¿™äº›å…±åŒéƒ½æœ‰çš„è®¾ç½®ï¼Œä¸¤è€…ä¹Ÿæ˜¯ä¸å†²çªçš„ï¼Œè®¾ç½® `EditorConfig` çš„ `indent_size` ä¸º `4` ï¼Œ `Prettier` çš„ `tabWidth` ä¸º `2` ã€‚

![æ¼”ç¤º](./assets/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343330393037343030312d35333637633261322d373934342d346466642d386266372d6166366439636534316539392e67696623616c69676e3d6c65667426646973706c61 (1).gif)

å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æˆ‘ä»¬æ–°èµ·ä¸€è¡Œæ—¶ï¼Œæ ¹æ® `.editorconfig` ä¸­çš„é…ç½®ï¼Œç¼©è¿›å¤§å°ä¸º `4` ï¼Œæ‰€ä»¥å…‰æ ‡ç›´æ¥è·³åˆ°äº†æ­¤å¤„ï¼Œä½†æ˜¯ä¿å­˜æ—¶ï¼Œå› ä¸ºæˆ‘ä»¬é»˜è®¤çš„æ ¼å¼åŒ–å·¥å…·å·²ç»åœ¨ `.vscode/settings.json` ä¸­è®¾ç½®ä¸ºäº† `Prettier` ï¼Œæ‰€ä»¥è¿™æ—¶å€™è¯»å–ç¼©è¿›å¤§å°ä¸º `2` çš„é…ç½®ï¼Œå¹¶æ­£ç¡®æ ¼å¼åŒ–äº†ä»£ç ã€‚

å½“ç„¶ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®å¤§å®¶ä¸¤ä¸ªéƒ½é…ç½®æ–‡ä»¶é‡åˆçš„åœ°æ–¹éƒ½ä¿æŒä¸€è‡´æ¯”è¾ƒå¥½ï½

### 1.2.4 .prettierignore

å¿½ç•¥æ ¼å¼åŒ–çš„æ–‡ä»¶

## 2.ä»£ç è´¨é‡é—®é¢˜

### 2.1 ESLint

#### 2.1.1 å®‰è£…é…ç½®

åœ¨ä¸Šé¢æˆ‘ä»¬é…ç½®äº† `EditorConfig` å’Œ `Prettier` éƒ½æ˜¯ä¸ºäº†è§£å†³**ä»£ç é£æ ¼é—®é¢˜**ï¼Œè€Œ `ESLint` æ˜¯ä¸»è¦ä¸ºäº†è§£å†³**ä»£ç è´¨é‡é—®é¢˜**ï¼Œå®ƒèƒ½åœ¨æˆ‘ä»¬ç¼–å†™ä»£ç æ—¶å°±æ£€æµ‹å‡ºç¨‹åºå¯èƒ½å‡ºç°çš„éšæ€§BUGï¼Œé€šè¿‡ `eslint --fix` è¿˜èƒ½è‡ªåŠ¨ä¿®å¤ä¸€äº›ä»£ç å†™æ³•é—®é¢˜ï¼Œæ¯”å¦‚ä½ å®šä¹‰äº† `var a = 3` ï¼Œè‡ªåŠ¨ä¿®å¤åä¸º `const a = 3` ã€‚è¿˜æœ‰è®¸å¤šç±»ä¼¼çš„å¼ºåˆ¶æ‰­è½¬ä»£ç æœ€ä½³å†™æ³•çš„è§„åˆ™ï¼Œåœ¨æ— æ³•è‡ªåŠ¨ä¿®å¤æ—¶ï¼Œä¼šç»™å‡ºçº¢çº¿æç¤ºï¼Œå¼ºè¿«å¼€å‘äººå‘˜ä¸ºå…¶å¯»æ±‚æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚

> prettier ä»£ç é£æ ¼ç»Ÿä¸€æ”¯æŒçš„è¯­è¨€æ›´å¤šï¼Œè€Œä¸”å·®å¼‚åŒ–å°ï¼Œeslint ä¸€å¤§å †çš„é…ç½®èƒ½å¼„å‡ºä¸€å †é£æ ¼ï¼Œprettier èƒ½å¯¹ ts js html css json mdåšé£æ ¼ç»Ÿä¸€ï¼Œè¿™æ–¹é¢ eslint æ¯”ä¸è¿‡ã€‚ --æ¥è‡ªâ€œä¸‰å…ƒå°è¿·å¦¹â€

æˆ‘ä»¬å…ˆæŠŠå®ƒç”¨èµ·æ¥ï¼Œç›´è§‚æ„Ÿå—ä¸€ä¸‹å…¶å¸¦æ¥çš„å¥½å¤„ï¼

é¦–å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£… `eslint` ï¼š

```
yarn add eslint@8.0.1 -D
```

#### 2.1.1 åˆå§‹åŒ–é…ç½®æ–‡ä»¶

```
npx eslint --init
```

ä¸Šè¿°å‘½ä»¤çš„åŠŸèƒ½ä¸ºåˆå§‹åŒ– `ESLint` çš„é…ç½®æ–‡ä»¶ï¼Œé‡‡å–çš„æ˜¯é—®ç­”çš„å½¢å¼ï¼Œç‰¹åˆ«äººæ€§åŒ–ã€‚ä¸è¿‡åœ¨æˆ‘ä»¬ä»‹ç»å„ä¸ªé—®ç­”ä¹‹å‰å…ˆæ¥çœ‹çœ‹è¿™å¥å‘½ä»¤ä¸­ `npx` æ˜¯ä»€ä¹ˆã€‚

å®‰è£…ç»“æŸåï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹å¤šå‡ºäº†æ–°çš„æ–‡ä»¶ `.eslintrc.js` ï¼Œè¿™ä¾¿æ˜¯æˆ‘ä»¬çš„ `eslint` é…ç½®æ–‡ä»¶äº†ã€‚æ›´æ”¹åçš„å†…å®¹å¦‚ä¸‹

```js
const OFF = 0;
const WARN = 1;
const ERROR = 2;

module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: ["standard-with-typescript", "plugin:react/recommended", "prettier"],
  overrides: [
    {
      env: {
        node: true,
      },
      files: [".eslintrc.{js,cjs}"],
      parserOptions: {
        sourceType: "script",
      },
    },
  ],
  parserOptions: {
    ecmaVersion: "latest",
    sourceType: "module",
    ecmaFeatures: {
      jsx: true,
    },
  },
  plugins: ["react"],
  rules: {
    // å¯¹è±¡çš„æœ€åä¸€ä¸ªå¯ä»¥å¢åŠ ã€,ã€‘
    "@typescript-eslint/comma-dangle": OFF,
    // å•å¼•å·å…³é—­
    "@typescript-eslint/quotes": OFF,
    // éœ€è¦åˆ†å·
    "@typescript-eslint/semi": OFF,
    // ä¸å…è®¸ä½¿ç”¨var
    "no-var": ERROR,
    // å‡½æ•°ä¸éœ€è¦tsæ ‡æ³¨è¿”å›ç±»å‹
    "@typescript-eslint/explicit-function-return-type": OFF,
  },
};
```

å„ä¸ªå±æ€§å­—æ®µçš„ä½œç”¨å¯åœ¨ [Configuring ESLint](https://eslint.bootcss.com/docs/user-guide/configuring) ä»”ç»†äº†è§£ï¼Œå¯èƒ½ä¼šæ¯”è¾ƒè¿·æƒ‘çš„åœ°æ–¹æ˜¯ `extends` å’Œ `plugins` çš„å…³ç³»ï¼Œå…¶å® `plugins` å°±æ˜¯**æ’ä»¶**çš„æ„æ€ï¼Œéƒ½æ˜¯éœ€è¦ npm åŒ…çš„å®‰è£…æ‰å¯ä»¥ä½¿ç”¨ï¼Œåªä¸è¿‡é»˜è®¤æ”¯æŒç®€å†™ï¼Œå®˜ç½‘éƒ½æœ‰è¯´ï¼›è‡³äº `extneds` å…¶å®å°±æ˜¯ä½¿ç”¨æˆ‘ä»¬å·²ç»ä¸‹è½½çš„æ’ä»¶çš„æŸäº›é¢„è®¾è§„åˆ™ã€‚

#### 2.1.3 é…ç½®è‡ªåŠ¨ä¿®å¤

æˆ‘ä»¬çŸ¥é“ `eslint` ç”±ç¼–è¾‘å™¨æ”¯æŒæ˜¯æœ‰è‡ªåŠ¨ä¿®å¤åŠŸèƒ½çš„ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…æ‰©å±•ï¼š

![image-20240317113812130](./assets/image-20240317113812130.png)

å†åˆ°ä¹‹å‰åˆ›å»ºçš„ `.vscode/settings.json` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```json
{
  "eslint.validate": ["javascript", "javascriptreact", "typescript", "typescriptreact"],
  "typescript.tsdk": "./node_modules/typescript/lib", // ä»£æ›¿ vscode çš„ ts è¯­æ³•æ™ºèƒ½æç¤º
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  }
}
```

è¿™æ—¶å€™æˆ‘ä»¬ä¿å­˜æ—¶ï¼Œå°±ä¼šå¼€å¯ `eslint` çš„è‡ªåŠ¨ä¿®å¤ï¼Œå®Œç¾ï¼

![æ¼”ç¤º](./assets/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343536303537343137352d64626361623538352d663934652d343738322d626139632d3336396133326639393333362e67696623616c69676e3d6c65667426646973706c61793d.gif)

ä¸è¿‡æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸å¸Œæœ› `ESLint` æˆ– `Prettier` å»å¯¹æŸäº›æ–‡ä»¶åšä»»ä½•ä¿®æ”¹ï¼Œæ¯”å¦‚æŸä¸ªç‰¹å®šçš„æƒ…å†µä¸‹æˆ‘æƒ³å»çœ‹çœ‹æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å†…å®¹ï¼Œé‡Œé¢çš„å†…å®¹ä¸€å®šæ˜¯éå¸¸ä¸ç¬¦åˆå„ç§ lint è§„åˆ™çš„ï¼Œä½†æˆ‘ä¸å¸Œæœ›æŒ‰ä¿å­˜æ—¶å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬æ·»åŠ  `.eslintignore` å’Œ `.prettierignore` ï¼Œæˆ‘ä¸€èˆ¬ä¼šä½¿è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹éƒ½ä¿æŒä¸€è‡´ï¼š

```
/node_modules
/build
/dist
```

### 2.2 StyleLint

#### 2.2.1 å®‰è£…é…ç½®

å®‰è£…ä¸¤ä¸ªåŸºæœ¬çš„åŒ…ï¼š

```
yarn add stylelint@16.2.1 stylelint-config-standard@36.0.0 -D
```

ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º `.stylelintrc.js` æ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
module.exports = {
  extends: ['stylelint-config-standard'],
  rules: {
    'comment-empty-line-before': null,
    'declaration-empty-line-before': null,
    'function-name-case': 'lower',
    'no-descending-specificity': null,
    'no-invalid-double-slash-comments': null,
    'rule-empty-line-before': 'always',
  },
  ignoreFiles: ['node_modules/**/*', 'build/**/*'],
}
```

åŒæ ·ï¼Œç®€å•ä»‹ç»ä¸‹é…ç½®ä¸Šçš„ä¸‰ä¸ªå±æ€§ï¼š

- `extends` ï¼šå…¶å®å’Œ `eslint` çš„ç±»ä¼¼ï¼Œéƒ½æ˜¯æ‰©å±•ï¼Œä½¿ç”¨ `stylelint` å·²ç»é¢„è®¾å¥½çš„ä¸€äº›è§„åˆ™ã€‚
- `rules` ï¼šå°±æ˜¯å…·ä½“çš„è§„åˆ™ï¼Œå¦‚æœé»˜è®¤çš„ä½ ä¸æ»¡æ„ï¼Œå¯ä»¥è‡ªå·±å†³å®šæŸä¸ªè§„åˆ™çš„å…·ä½“å½¢å¼ã€‚
- `ignoreFiles` ï¼šä¸åƒ `eslint` éœ€è¦æ–°å»º ignore æ–‡ä»¶ï¼Œ `stylelint` é…ç½®å°±æ”¯æŒå¿½ç•¥é…ç½®å­—æ®µï¼Œæˆ‘ä»¬å…ˆæ·»åŠ  `node_modules` å’Œ `build` ï¼Œä¹‹åæœ‰éœ€è¦å¤§å®¶å¯è‡ªè¡Œæ·»åŠ ã€‚

> å…¶ä¸­å…³äº `xxx/**/*` è¿™ç§å†™æ³•çš„æ„æ€æœ‰ä¸ç†è§£çš„ï¼Œå¤§å®¶å¯åœ¨ `google` ï¼ˆæˆ–ç™¾åº¦ï¼‰**globæ¨¡å¼**ã€‚

#### 2.2.2 é…ç½®ä¿å­˜è‡ªåŠ¨ä¿®å¤

ä¸ `eslint` ä¸€æ ·ï¼Œæƒ³è¦åœ¨ç¼–è¾‘ä»£ç æ—¶æœ‰é”™è¯¯æç¤ºä»¥åŠè‡ªåŠ¨ä¿®å¤åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ vscode å®‰è£…ä¸€ä¸ªæ‰©å±•ï¼š

![image-20240317114153650](./assets/image-20240317114153650.png)

å¹¶ä¸”åœ¨ `.vscode/settings.json` ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```js
{
	// ä½¿ç”¨ stylelint è‡ªèº«çš„æ ¡éªŒå³å¯
  "css.validate": false,
  "less.validate": false,
  "scss.validate": false,

  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.fixAll.stylelint": true
  },
}
```

è¿™æ—¶å€™éšä¾¿å»ºä¸€ä¸ª `.less` æ–‡ä»¶æµ‹è¯•ä¸‹ï¼Œå·²ç»æœ‰é”™è¯¯æç¤ºå’Œä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤åŠŸèƒ½äº†ã€‚

![æ¼”ç¤º](./assets/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343535363934383339322d37343533376632312d643933382d343566382d383436372d3362643730373436323434392e67696623616c69676e3d6c65667426646973706c61793d.gif)

#### 2.2.3 é…ç½®é¡ºåºè‡ªåŠ¨ä¿®å¤

å®‰è£…[stylelint-order](https://www.npmjs.com/package/stylelint-order)è¿™ä¸ªæ’ä»¶å°±å¯ä»¥äº†ï¼Œ å…·ä½“é…ç½®é¡¹çš„è¯çœ‹npmä¸Šçš„é…ç½®å°±è¡Œäº†ï¼Œé…ç½®è¿™ä¸ªçš„æ—¶å€™vscodeå¯èƒ½ä¼šæŠ½ç–¯ï¼Œé…ç½®æ­£ç¡®ä½†æ˜¯æ²¡æ•ˆæœï¼Œé‡å¯vscodeå°±è¡Œäº†

```
yarn add stylelint-order@6.0.4 -D
```

#### 2.2.4 æ ¹æ®åˆ†ç»„æ’åº

é…ç½®[stylelint-config-rational-order](https://github.com/constverum/stylelint-config-rational-order)æ’ä»¶

```
yarn add stylelint-config-rational-order@0.1.2 -D
```

ä¼šæŒ‰ç…§å¦‚ä¸‹å±æ€§è¿›è¡Œåˆ†ç»„æ’åº

```
1.Positioning   2.Box Model    3.Typography    4.Visual    5.Animation    6.Misc
```

![image-20240317115528040](/Users/zhuling/Documents/zhuling/å·¥ç¨‹åŒ–ç»ƒä¹ /lint_project/assets/image-20240317115528040.png)

#### 2.2.5 æç¤ºæˆ‘ä»¬å†™çš„çŸ›ç›¾æ ·å¼

[stylelint-declaration-block-no-ignored-properties](https://github.com/kristerkari/stylelint-declaration-block-no-ignored-properties) ç”¨äºæç¤ºæˆ‘ä»¬å†™çš„çŸ›ç›¾æ ·å¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ä¸­ `width` æ˜¯ä¼šè¢«æµè§ˆå™¨å¿½ç•¥çš„ï¼Œè¿™å¯ä»¥é¿å…æˆ‘ä»¬çŠ¯ä¸€äº›ä½çº§é”™è¯¯ï½

```
yarn add stylelint-declaration-block-no-ignored-properties@2.8.0 -D
```

lintæ–‡ä»¶ä¸­é…ç½®

```json
// .stylelintrc
{
  "plugins": ["stylelint-declaration-block-no-ignored-properties"],
  "rules": {
    "plugin/declaration-block-no-ignored-properties": true
  }
}
```

### 2.3 ESLintã€Stylelint å’Œ Prettier çš„å†²çª

æœ‰æ—¶å€™ `eslint` å’Œ `stylelint` çš„è‡ªå®šä¹‰è§„åˆ™å’Œ `prettier` å®šä¹‰çš„è§„åˆ™å†²çªäº†ï¼Œæ¯”å¦‚åœ¨ `.eslintrc.js` ä¸­æŸä¸ª `extends` çš„é…ç½®è®¾ç½®äº†ç¼©è¿›å¤§å°ä¸º `4` ï¼Œä½†æ˜¯æˆ‘ `.prettierrc` ä¸­æˆ‘è®¾ç½®çš„ç¼©è¿›ä¸º `2` ï¼Œé‚£å°±ä¼šå‡ºç°æˆ‘ä»¬ä¿å­˜æ—¶ï¼Œå…ˆæ˜¯ `eslint` çš„è‡ªåŠ¨ä¿®å¤ç¼©è¿›å¤§å°ä¸º `4` ï¼Œè¿™ä¸ªæ—¶å€™ `prettier` ä¸å¼€å¿ƒäº†ï¼Œåˆå¼ºåˆ¶æŠŠç¼©è¿›æ”¹ä¸ºäº† `2` ï¼Œå¥½äº†ï¼Œ `eslint` ä¸å¼€å¿ƒï¼Œä»£ç ç›´æ¥çˆ†çº¢ï¼

![æ¼”ç¤º](./assets/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343536313736313536302d66396531666662352d356436652d343766352d623264612d3734313031333164303465622e67696623616c69676e3d6c65667426646973706c61793d.gif)

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™éƒ¨åˆ†å†²çªå‘¢ï¼Ÿ

##### eslintå†²çª

å…¶å®å®˜æ–¹æä¾›äº†å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼ŒæŸ¥é˜… [Integrating with Linters](https://prettier.io/docs/en/integrating-with-linters.html) å¯çŸ¥ï¼Œé’ˆå¯¹ `eslint` å’Œ `stylelint` éƒ½æœ‰å¾ˆå¥½çš„æ’ä»¶æ”¯æŒï¼Œå…¶åŸç†éƒ½æ˜¯ç¦ç”¨ä¸ `prettier` å‘ç”Ÿå†²çªçš„è§„åˆ™ã€‚

å®‰è£…æ’ä»¶ [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier) ï¼Œè¿™ä¸ªæ’ä»¶ä¼šç¦ç”¨æ‰€æœ‰å’Œ prettier èµ·å†²çªçš„è§„åˆ™ï¼š

```
yarn add eslint-config-prettier@9.1.0 -D
```

æ·»åŠ ä»¥ä¸‹é…ç½®åˆ° `.eslintrc.js` çš„ `extends` ä¸­ï¼š

```json
{
  "extends": ["some-other-config-you-use", "prettier"]
}
```

è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ `'prettier'` åŠä¹‹åçš„é…ç½®è¦æ”¾åˆ°åŸæ¥æ·»åŠ çš„é…ç½®çš„åé¢ï¼Œè¿™æ ·æ‰èƒ½è®© `prettier` ç¦ç”¨ä¹‹åä¸å…¶å†²çªçš„è§„åˆ™ã€‚

##### stylelintå†²çª

`stylelint` çš„å†²çªè§£å†³ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå…ˆå®‰è£…æ’ä»¶ [stylelint-config-prettier](https://github.com/prettier/stylelint-config-prettier) ï¼š

```
yarn add stylelint-config-prettier@9.0.5 -D
```

æ·»åŠ é…ç½®

```json
{
  "extends": [
    // other configs ...
    "stylelint-config-prettier"
  ]
}
```

### 2.4 lint-staged&husky

åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡æäº¤å‰æˆ‘ä»¬éƒ½è¦å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ä»¥åŠ `eslint` å’Œ `stylelint` çš„è§„åˆ™æ ¡éªŒï¼Œä»¥æ­¤æ¥å¼ºåˆ¶è§„èŒƒæˆ‘ä»¬çš„ä»£ç é£æ ¼ï¼Œä»¥åŠé˜²æ­¢éšæ€§ BUG çš„äº§ç”Ÿã€‚

é‚£ä¹ˆæœ‰ä»€ä¹ˆåŠæ³•åªå¯¹æˆ‘ä»¬ git ç¼“å­˜åŒºæœ€æ–°æ”¹åŠ¨è¿‡çš„æ–‡ä»¶è¿›è¡Œä»¥ä¸Šçš„æ ¼å¼åŒ–å’Œ lint è§„åˆ™æ ¡éªŒå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯[ lint-staged](https://github.com/okonet/lint-staged) ã€‚

æˆ‘ä»¬è¿˜éœ€è¦å¦ä¸€ä¸ªå·¥å…· [husky](https://github.com/typicode/husky) ï¼Œå®ƒä¼šæä¾›ä¸€äº›é’©å­ï¼Œæ¯”å¦‚æ‰§è¡Œ `git commit` ä¹‹å‰çš„é’©å­ `pre-commit` ï¼Œå€ŸåŠ©è¿™ä¸ªé’©å­æˆ‘ä»¬å°±èƒ½æ‰§è¡Œ `lint-staged` æ‰€æä¾›çš„ä»£ç æ–‡ä»¶æ ¼å¼åŒ–åŠ lint è§„åˆ™æ ¡éªŒï¼

```
yarn add husky@9.0.11 lint-staged@15.2.2 -D
```

å¯ç”¨huskyï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¼šè‡ªåŠ¨åœ¨packageä¸­å¢åŠ å‘½ä»¤

```
npx husky install
```

husky prepare å‘½ä»¤ï¼Œè‡ªåŠ¨åŠ å…¥

```
{
  "scripts": {
    "prepare": "husky install"
  }
}
```

å®Œæˆhuskyé…ç½®ä¹‹åï¼Œæˆ‘ä»¬åšåˆ°äº†é€šè¿‡æ¯æ¬¡gitæäº¤æ—¶éƒ½å¯¹é¡¹ç›®åš lint æ£€æŸ¥ï¼Œé˜²æ­¢ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç æäº¤åˆ°ä»“åº“ï¼Œä½†æ˜¯è¿™å¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼šæ¯æ¬¡æäº¤éƒ½å°†å¯¹æ•´ä¸ªé¡¹ç›®åš lint æ£€æŸ¥ï¼Œå¯¹äºä¸€ä¸ªè¶Šæ¥è¶Šå¤§çš„é¡¹ç›®æ¥è¯´ï¼Œè¿™æ— ç–‘æ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„æ“ä½œï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºæ–°æ¥å…¥è¿™äº›é…ç½®çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­å¯èƒ½å·²ç»å­˜åœ¨äº†å¤§é‡ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ï¼Œä¸èƒ½è¦æ±‚åœ¨æäº¤æ—¶æŠŠæ‰€æœ‰å†å²é—ç•™çš„é—®é¢˜ä¿®å¤ä¹‹åæ‰èƒ½æäº¤ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°lint-stagedè¿™ä¸ªå·¥å…·äº†ã€‚

éšååœ¨ `package.json` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼ˆä½ç½®éšæ„ï¼Œæˆ‘æ¯”è¾ƒä¹ æƒ¯æ”¾åœ¨ `repository` ä¸Šé¢ï¼‰ï¼š

```
{
	"husky": {
    "hooks": {
      "pre-commit": "lint-staged",
    }
  },
  "lint-staged": {
    "*.{ts,tsx,js}": [
      "eslint --config .eslintrc.js"
    ],
    "*.{css,less,scss}": [
      "stylelint --config .stylelintrc.js"
    ],
    "*.{ts,tsx,js,json,html,yml,css,less,scss,md}": [
      "prettier --write"
    ]
  },
}
```

é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šå¯¹æš‚å­˜åŒºåç¼€ä¸º `.ts .tsx .js` çš„æ–‡ä»¶è¿›è¡Œ `eslint` æ ¡éªŒï¼Œ `--config` çš„ä½œç”¨æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚ä¹‹ååŒç†å¯¹æš‚å­˜åŒºåç¼€ä¸º `.css .less .scss` çš„æ–‡ä»¶è¿›è¡Œ `stylelint` æ ¡éªŒï¼Œæ³¨æ„âš ï¸ï¼Œæˆ‘ä»¬æ²¡æœ‰æ·»åŠ  `--fix` æ¥è‡ªåŠ¨ä¿®å¤ä¸ç¬¦åˆè§„åˆ™çš„ä»£ç ï¼Œå› ä¸ºè‡ªåŠ¨ä¿®å¤çš„å†…å®¹å¯¹æˆ‘ä»¬ä¸é€æ˜ï¼Œä½ ä¸çŸ¥é“å“ªäº›ä»£ç è¢«æ›´æ”¹ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯æ— æ³•æ¥å—çš„ã€‚

ä½†æ˜¯åœ¨ä½¿ç”¨ `prettier` è¿›è¡Œä»£ç æ ¼å¼åŒ–æ—¶ï¼Œå®Œå…¨å¯ä»¥æ·»åŠ  `--write` æ¥ä½¿æˆ‘ä»¬çš„ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œå®ƒä¸ä¼šæ›´æ”¹è¯­æ³•å±‚é¢ä¸Šçš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒã€‚

ä¿®æ”¹.husky/pre-commitè„šæœ¬çš„å†…å®¹ï¼Œå°†.husky/pre-commitè„šæœ¬çš„å†…å®¹æ”¹ä¸ºnpm run lint-stagedï¼Œ é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œå°±å®Œæˆäº†lint-stagedçš„é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™å†è¿›è¡Œ git æäº¤æ—¶ï¼Œå°†åªæ£€æŸ¥æš‚å­˜åŒºï¼ˆstagedï¼‰çš„æ–‡ä»¶ï¼Œä¸ä¼šæ£€æŸ¥é¡¹ç›®æ‰€æœ‰æ–‡ä»¶ï¼ŒåŠ å¿«äº†æ¯æ¬¡æäº¤ lint æ£€æŸ¥çš„é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šè¢«å†å²é—ç•™é—®é¢˜å½±å“ã€‚é€šè¿‡è¿™æ ·çš„çº¦æŸè®©æˆ‘ä»¬å®šä¹‰çš„è§„åˆ™è§„èŒƒå¤§å®¶éƒ½èƒ½å»éµå®ˆï¼Œå…±åŒç»´æŠ¤ä»£ç çš„è´¨é‡ã€‚

```
#!/usr/bin/env sh
npx lint-staged
```

> å¯èƒ½å¤§å®¶æœç´¢ä¸€äº›æ–‡ç« çš„æ—¶å€™ï¼Œä¼šå‘ç°åœ¨ lint-staged ä¸­è¿˜é…ç½®äº†ä¸€ä¸ª git add ï¼Œå®é™…ä¸Šåœ¨ v10 ç‰ˆæœ¬ä¹‹åä»»ä½•è¢«ä¿®æ”¹äº†çš„åŸ staged åŒºçš„æ–‡ä»¶éƒ½ä¼šè¢«è‡ªåŠ¨ git addï¼Œæ‰€ä»¥æ— éœ€å†æ·»åŠ ã€‚

### 2.5 lintå‘½ä»¤

æˆ‘ä»¬åœ¨ `package.json` çš„ `scripts` ä¸­å¢åŠ ä»¥ä¸‹ä¸‰ä¸ªé…ç½®ï¼š

```json
{
  "scripts": {
    "lint": "npm run lint-eslint && npm run lint-stylelint",
    "lint-eslint": "eslint -c .eslintrc.js --ext .ts,.tsx,.js src",
    "lint-stylelint": "stylelint --config .stylelintrc.js src/**/*.{less,css,scss}"
  }
}
```

åœ¨æ§åˆ¶å°æ‰§è¡Œ `npm run lint-eslint` æ—¶ï¼Œä¼šå»å¯¹ `src/` ä¸‹çš„æŒ‡å®šåç¼€æ–‡ä»¶è¿›è¡Œ `eslint` è§„åˆ™æ£€æµ‹ï¼Œ `lint-stylelint` ä¹Ÿæ˜¯åŒç†ï¼Œ `npm run lint` ä¼šä¸¤è€…éƒ½æŒ‰é¡ºåºæ‰§è¡Œã€‚

å…¶å®æˆ‘ä¸ªäººæ¥è¯´ï¼Œè¿™å‡ ä¸ªå‘½ä»¤æˆ‘æ˜¯éƒ½ä¸æƒ³å†™è¿› `scripts` ä¸­çš„ï¼Œå› ä¸ºæˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œä¸è§„èŒƒçš„åœ°æ–¹å°±å·²ç»è‡ªåŠ¨ä¿®å¤äº†ï¼Œåªè¦ä¿æŒè‰¯å¥½çš„ä¹ æƒ¯ï¼Œçœ‹åˆ°æœ‰çˆ†çº¢çº¿çš„æ—¶å€™æƒ³åŠæ³•å»è§£å†³å®ƒï¼Œè€Œä¸æ˜¯è§†è€Œä¸è§ï¼Œé‚£ä¹ˆæ ¹æœ¬ä¸éœ€è¦å¯¹æ‰€æœ‰åŒ…å«çš„æ–‡ä»¶å†è¿›è¡Œä¸€æ¬¡å‘½ä»¤å¼çš„è§„åˆ™æ ¡éªŒã€‚

ä½†æ˜¯å¯¹äºæ–°æäº¤ç¼“å­˜åŒºçš„ä»£ç è¿˜æ˜¯æœ‰å¿…è¦æ‰§è¡Œä¸€æ¬¡æ ¡éªŒçš„ï¼Œè¿™ä¸ªåé¢ä¼šè¯´åˆ°ã€‚

## 3.æäº¤ç®¡ç†commitlint + changelog

> åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œå¦‚æœ git çš„æäº¤è¯´æ˜ç²¾å‡†ï¼Œåœ¨åæœŸåä½œä»¥åŠ bug å¤„ç†æ—¶ä¼šå˜å¾—æœ‰æ®å¯æŸ¥ï¼Œé¡¹ç›®çš„å¼€å‘å¯ä»¥æ ¹æ®è§„èŒƒçš„æäº¤è¯´æ˜å¿«é€Ÿç”Ÿæˆå¼€å‘æ—¥å¿—ï¼Œä»è€Œæ–¹ä¾¿å¼€å‘è€…æˆ–ç”¨æˆ·è¿½è¸ªé¡¹ç›®çš„å¼€å‘ä¿¡æ¯å’ŒåŠŸèƒ½ç‰¹æ€§ã€‚

> å»ºè®®é˜…è¯» [Commit message å’Œ Change log ç¼–å†™æŒ‡å—ï¼ˆé˜®ä¸€å³°ï¼‰](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)

[commitlint](https://github.com/conventional-changelog/commitlint) å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œ git commit æ—¶çš„ message æ ¼å¼æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œ[conventional-changelog](https://github.com/conventional-changelog/commitlint) å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆ `changelog` ï¼Œè‡³äºåœ¨å‘½ä»¤è¡Œä¸­è¿›è¡Œå¯è§†åŒ–çš„ git commit æ’ä»¶ [commitizen](https://github.com/commitizen/cz-cli) æˆ‘ä»¬å°±ä¸é…äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ï½

é¦–å…ˆå®‰è£… `commitlint` ç›¸å…³ä¾èµ–ï¼š

```
yarn add @commitlint/cli@19.2.0 @commitlint/config-conventional@19.1.0 -D
```

[@commitlint/config-conventional](https://github.com/conventional-changelog/commitlint/tree/master/@commitlint/config-conventional) ç±»ä¼¼ `eslint` é…ç½®æ–‡ä»¶ä¸­çš„ `extends` ï¼Œå®ƒæ˜¯å®˜æ–¹æ¨èçš„ angular é£æ ¼çš„ commitlint é…ç½®ï¼Œæä¾›äº†å°‘é‡çš„ lint è§„åˆ™ï¼Œé»˜è®¤åŒ…æ‹¬äº†ä»¥ä¸‹é™¤äº†æˆ‘è‡ªå·±æ–°å¢çš„ `type` ã€‚

éšååœ¨æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶ `.commitlintrc.js` ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ commitlint é…ç½®æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      ['build', 'ci', 'chore', 'docs', 'feat', 'fix', 'perf', 'refactor', 'revert', 'style', 'test', 'addlog'],
    ],
  },
}
```

æˆ‘è‡ªå·±å¢åŠ äº†ä¸€ç§ `addlog` ï¼Œç›®çš„æ˜¯è¡¨ç¤ºä¸€äº›æ³¨é‡Šçš„å¢åˆ æ”¹çš„æäº¤ã€‚

```
/**
 * build : æ”¹å˜äº†buildå·¥å…· å¦‚ webpack
 * ci : æŒç»­é›†æˆæ–°å¢
 * chore : æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
 * feat : æ–°åŠŸèƒ½
 * docs : æ–‡æ¡£æ”¹å˜
 * fix : ä¿®å¤bug
 * perf : æ€§èƒ½ä¼˜åŒ–
 * refactor : æŸä¸ªå·²æœ‰åŠŸèƒ½é‡æ„
 * revert : æ’¤é”€ä¸Šä¸€æ¬¡çš„ commit
 * style : ä»£ç æ ¼å¼æ”¹å˜
 * test : å¢åŠ æµ‹è¯•
 * addlog: å¢åŠ æ³¨é‡Š
 */
```

éšåå›åˆ° `package.json` çš„ `husky` é…ç½®ï¼Œå¢åŠ ä¸€ä¸ªé’©å­ï¼š

```
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint --config .commitlintrc.js -E HUSKY_GIT_PARAMS"
    }
  },
}
```

`-E HUSKY_GIT_PARAMS` ç®€å•ç†è§£å°±æ˜¯ä¼šæ‹¿åˆ°æˆ‘ä»¬çš„ message ï¼Œç„¶å commitlint å†å»è¿›è¡Œ lint æ ¡éªŒã€‚

æ¥ç€é…ç½®ç”Ÿæˆæˆ‘ä»¬çš„ changelog ï¼Œé¦–å…ˆå®‰è£…ä¾èµ–ï¼š

```
yarn add conventional-changelog-cli@4.1.0 -D
```

åœ¨ `package.json` çš„ `scripts` ä¸‹å¢åŠ ä¸€ä¸ªå‘½ä»¤ï¼š

```
{
  "scripts": {
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s"
  },
}
```

ä¹‹åå°±å¯ä»¥é€šè¿‡ `npm run changelog` ç”Ÿæˆ angular é£æ ¼çš„ changelog ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢è¿™æ¡å‘½ä»¤äº§ç”Ÿçš„ changelog æ˜¯åŸºäºä¸Šæ¬¡ tag ç‰ˆæœ¬ä¹‹åçš„å˜æ›´ï¼ˆfeatã€fix ç­‰ç­‰ï¼‰æ‰€äº§ç”Ÿçš„ã€‚

ç°åœ¨å°±æ¥æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬ä¸Šé¢çš„å·¥ä½œæœ‰æ²¡æœ‰æ­£å¸¸è¿è¡Œå§ï¼æ‰§è¡Œä»¥ä¸‹æäº¤ä¿¡æ¯ä¸è§„èŒƒï¼ˆchore å†™æˆ choraï¼‰çš„å‘½ä»¤ï¼š

```
# æäº¤æ‰€æœ‰å˜åŒ–åˆ°ç¼“å­˜åŒº
git add -A
# æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯
git commit -m "chora: add commitlint to force commit style"
```

åƒé¢„æœŸä¸­çš„ä¸€è‡´ï¼Œå‡ºç°äº†ä»¥ä¸‹æŠ¥é”™ï¼š

![image-20240317121830375](./assets/image-20240317121830375.png)

é‚£æˆ‘ä»¬ç°åœ¨è¿›è¡Œæˆ‘ä»¬çš„æäº¤ï¼ŒæŠŠæ•…æ„å†™é”™çš„æ”¹å›æ¥ï¼š

```
git commit -m "chore: add commitlint to force commit style"
```

è¿™æ—¶å€™æˆ‘ä»¬æˆåŠŸ commit ï¼Œå†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æäº¤åˆ°è¿œç«¯ï¼š

```
git push origin master
```
